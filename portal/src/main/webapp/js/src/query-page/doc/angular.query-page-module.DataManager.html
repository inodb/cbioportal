<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: DataManager</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: DataManager</h1>

    



<section>

<header>
    <h2>
        <span class="ancestors"><a href="angular.html">angular</a><a href="angular.query-page-module.html">.query-page-module</a>.</span>
    
    DataManager
    </h2>
    
</header>

<article>
    <div class="container-overview">
    

    
        
<dt>
    <h4 class="name" id="DataManager"><span class="type-signature"></span>new DataManager<span class="signature">()</span><span class="type-signature"></span></h4>

    
</dt>
<dd>

    
    <div class="description">
        An angular service that handles lazy loading of data.
It interacts with callers via promises that are either resolved instantly, if
the requested data has already been loaded, or are resolved once the requested
data is loaded.

It must finish initializing before it is used. This is enforced within DataManager,
but for various async reasons you may sometimes still wish to manually wait on 
DataManager.initPromise, which resolves exactly when it's done initializing.
    </div>
    

    

    

    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line96">line 96</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>DataManager.cancerStudy(id).then(function(data) {
      ... here we do something with data ...
});

or

DataManager.initPromise.then(function() {
    ... do stuff you don't want to do before the datamanager has initialized ...
});</code></pre>

    
</dd>

    
    </div>

    

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        <dl>
            
<dt>
    <h4 class="name" id="_samples"><span class="type-signature">(static) </span>_samples<span class="type-signature"></span></h4>

    
</dt>
<dd>
    
    <div class="description">
        _samples has the following form: {sample1: {gene1: genotype1, gene2: genotype2, ...}, sample2: ...}
where a genotype has the following form, where each element in it may or may not exist:
{ AMP: bool, HOMDEL: bool, HETLOSS: bool, GAIN: bool, MUT: [mutation1, mutation2, ...], EXP: float, PROT: float }
    </div>
    

    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line146">line 146</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    
</dd>

        
            
<dt>
    <h4 class="name" id="initPromise"><span class="type-signature">(static) </span>initPromise<span class="type-signature"></span></h4>

    
</dt>
<dd>
    
    <div class="description">
        A promise that resolves when the DataManager finishes initializing.
    </div>
    

    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line431">line 431</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    
</dd>

        </dl>
    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
            
<dt>
    <h4 class="name" id="cancerStudy"><span class="type-signature">(static) </span>cancerStudy<span class="signature">(id)</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h4>

    
</dt>
<dd>

    

    

    

    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The identifier of a cancer study</td>
        </tr>

    
    </tbody>
</table>
    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line388">line 388</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A promise that resolves into the data
corresponding to a cancer study.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object></span>


    </dd>
</dl>

        

    
</dd>

        
            
<dt>
    <h4 class="name" id="cancerStudyStubs"><span class="type-signature">(static) </span>cancerStudyStubs<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Object.&lt;string, Object>>}</span></h4>

    
</dt>
<dd>

    

    

    

    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line451">line 451</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A promise that resolve
to an object that maps cancer study ids to study "stubs", which
just contain the name and type of cancer.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object.&lt;string, Object>></span>


    </dd>
</dl>

        

    
</dd>

        
            
<dt>
    <h4 class="name" id="caseData"><span class="type-signature">(static) </span>caseData<span class="signature">(prof_ids, genes, case_ids)</span><span class="type-signature"> &rarr; {Promise.&lt;Object.&lt;string, Object>>}</span></h4>

    
</dt>
<dd>

    

    

    

    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>prof_ids</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>genes</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>case_ids</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>
    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line331">line 331</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>_samples</li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A promise that resolves into an object that maps
case ids to genomic data loaded from the profiles. This object is guaranteed
to contain the desired data, but also probably contains other data as well.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object.&lt;string, Object>></span>


    </dd>
</dl>

        

    
</dd>

        
            
<dt>
    <h4 class="name" id="caseSet"><span class="type-signature">(static) </span>caseSet<span class="signature">(case_set_id)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;string>>}</span></h4>

    
</dt>
<dd>

    

    

    

    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>case_set_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The stable identifier of a case set</td>
        </tr>

    
    </tbody>
</table>
    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line363">line 363</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A promise that resolves into an array
containing the case ids in the specified case set.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;string>></span>


    </dd>
</dl>

        

    
</dd>

        
            
<dt>
    <h4 class="name" id="geneSet"><span class="type-signature">(static) </span>geneSet<span class="signature">(id)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>

    
</dt>
<dd>

    

    

    

    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The identifier of a gene set</td>
        </tr>

    
    </tbody>
</table>
    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line410">line 410</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A promise that resolves into a string containing
whitespace-separated genes in the specified gene list.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>


    </dd>
</dl>

        

    
</dd>

        
            
<dt>
    <h4 class="name" id="geneSetStubs"><span class="type-signature">(static) </span>geneSetStubs<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Object.&lt;string, Object>>}</span></h4>

    
</dt>
<dd>

    

    

    

    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line464">line 464</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A promise that resolve
to an object that maps gene set ids to gene set "stubs", which
just contain the name of the gene set.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Object.&lt;string, Object>></span>


    </dd>
</dl>

        

    
</dd>

        
            
<dt>
    <h4 class="name" id="genomicProfileData"><span class="type-signature">(static) </span>genomicProfileData<span class="signature">(prof_ids, genes, case_ids)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;Object>>}</span></h4>

    
</dt>
<dd>

    
    <div class="description">
        Helper function for caseData. Of the requested data, loads the data that is not already loaded
and returns a list of data points (made by makeProfileDataPoints) made of 
the NEWLY loaded data.
    </div>
    

    

    

    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>prof_ids</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">Identifiers of the desired genomic profiles</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>genes</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">Identifiers of the desired genes</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>case_ids</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">Identifiers of the desired cases</td>
        </tr>

    
    </tbody>
</table>
    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line228">line 228</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A promise that resolves to the data points made from newly loaded data in makeProfileDataPoints.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;Object>></span>


    </dd>
</dl>

        

    
</dd>

        
            
<dt>
    <h4 class="name" id="makeProfileDataPoints"><span class="type-signature">(static) </span>makeProfileDataPoints<span class="signature">(prof_ids, genes, case_ids)</span><span class="type-signature"> &rarr; {Array.&lt;Object>}</span></h4>

    
</dt>
<dd>

    
    <div class="description">
        Helper function for genomicProfileData (not to be called anywhere else!). Creates data points that
represent the data stored on the specified case ids regarding the specified
genes and genetic profiles.
    </div>
    

    

    

    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>prof_ids</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">Identifiers of the desired genomic profiles</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>genes</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">Identifiers of the desired genes</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>case_ids</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">Identifiers of the desired cases</td>
        </tr>

    
    </tbody>
</table>
    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line182">line 182</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    - A list of data points of the form 
{sample: 'TCG-0002',  gene: 'PTEN', genotype: {type: 'AMP', data: false [, class: 'MISSENSE']}}
where genotype.class is only defined if genotype.type is 'MUT'
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;Object></span>


    </dd>
</dl>

        

    
</dd>

        
            
<dt>
    <h4 class="name" id="typesOfCancer"><span class="type-signature">(static) </span>typesOfCancer<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;string>>}</span></h4>

    
</dt>
<dd>

    

    

    

    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="query_page.js.html">src/query-page/query_page.js</a>, <a href="query_page.js.html#line438">line 438</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A promise that resolves into a list
of cancer type identifiers.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;string>></span>


    </dd>
</dl>

        

    
</dd>

        </dl>
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="angular.query-page-module.html">query-page-module</a></li><li><a href="angular.query-page-module.AppVars.html">AppVars</a></li><li><a href="angular.query-page-module.DataManager.html">DataManager</a></li><li><a href="angular.query-page-module.FormVars.html">FormVars</a></li><li><a href="angular.query-page-module.mainController.html">mainController</a></li><li><a href="angular.query-page-module.profileGroup.html">profileGroup</a></li><li><a href="angular.query-page-module.resize.html">resize</a></li><li><a href="angular.query-page-module.to_trusted_html.html">to_trusted_html</a></li></ul><h3>Namespaces</h3><ul><li><a href="angular.html">angular</a></li><li><a href="oql.html">oql</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Fri Oct 10 2014 15:57:24 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>